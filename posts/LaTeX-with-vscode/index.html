<!DOCTYPE html><html lang="zh-TW" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>在 VSCode 設置 LaTeX 編輯環境 | JHTNT Blog</title><meta name="author" content="JHTNT"><meta name="copyright" content="JHTNT"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="安裝 LaTeX 首先我們需要在電腦上安裝 LaTeX 的編譯引擎，目前主要的兩個發行版是 MiKTeX 與 TEX Live。稍後要在 VScode 安裝的延伸模組 LaTeX Workshop 推薦使用後者，不過整包安裝太過擁腫，因此我選擇使用 TEX Live 的輕量版 TinyTeX，需要用"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="https://jhtnt.github.io/posts/LaTeX-with-vscode/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查詢的內容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"prismjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '複製成功',
    error: '複製錯誤',
    noSupport: '瀏覽器不支援'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '剛剛',
    min: '分鐘前',
    hour: '小時前',
    day: '天前',
    month: '個月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: false,
    rightside: true,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '在 VSCode 設置 LaTeX 編輯環境',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-08-08 11:56:48'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = url => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      link.onload = () => resolve()
      link.onerror = () => reject()
      document.head.appendChild(link)
    })
  
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/css/vscode_dark_theme.css"><meta name="generator" content="Hexo 7.0.0"><link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet" /></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.imgur.com/cBOtjyB.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">13</div></a><a href="/tags/"><div class="headline">標籤</div><div class="length-num">12</div></a><a href="/categories/"><div class="headline">分類</div><div class="length-num">5</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首頁</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 文章總覽</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 標籤</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分類</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 連結</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="JHTNT Blog"><span class="site-name">JHTNT Blog</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜尋</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首頁</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 文章總覽</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 標籤</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分類</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 連結</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">在 VSCode 設置 LaTeX 編輯環境</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">發表於</span><time class="post-meta-date-created" datetime="2023-08-08T03:56:48.000Z" title="發表於 2023-08-08 11:56:48">2023-08-08</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新於</span><time class="post-meta-date-updated" datetime="2023-08-08T03:56:48.000Z" title="更新於 2023-08-08 11:56:48">2023-08-08</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%AF%A6%E7%94%A8%E5%B7%A5%E5%85%B7/">實用工具</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字數總計:</span><span class="word-count">2k</span></span></div></div></div><article class="post-content" id="article-container"><h2 id="安裝-latex">安裝 LaTeX</h2>
<p>首先我們需要在電腦上安裝 LaTeX 的編譯引擎，目前主要的兩個發行版是 MiKTeX 與 TEX Live。稍後要在 VScode 安裝的延伸模組 <strong>LaTeX Workshop</strong> 推薦使用後者，不過整包安裝太過擁腫，因此我選擇使用 TEX Live 的輕量版 <a target="_blank" rel="noopener" href="https://yihui.org/tinytex/">TinyTeX</a>，需要用到什麼 package 再安裝。</p>
<div class="note info flat"><p>若電腦有安裝 R 語言，則可以使用官方網站提供的另一種安裝方式。以下安裝方式有無安裝 R 語言皆可使用。</p>
</div>
<p>在 Windows 安裝 TinyTeX 只需要下載作者提供的 <a target="_blank" rel="noopener" href="https://yihui.org/tinytex/install-bin-windows.bat">bat 檔</a>並執行就能一鍵安裝（電腦需要有 powershell），可以在終端機輸入 <code>tlmgr</code> 指令測試是否安裝成功（需先重啟終端機）。未來若需要其他 package，可使用 <code>tlmgr install &lt;package name&gt;</code> 來安裝。</p>
<h2 id="設置-latex-workshop">設置 LaTeX Workshop</h2>
<p>首先在 VScode 安裝 <strong>LaTeX Workshop</strong> 這個延伸模組，然後進行以下設定。</p>
<h3 id="設定-latex-環境變數">設定 LaTeX 環境變數</h3>
<p>LaTeX Workshop 的 LaTeX 路徑會去環境變數裡抓，因此要確保設定好環境變數。而上面安裝 TinyTeX 的 bat 檔會幫我們自動設定好環境變數 (<code>%APPDATA%\TinyTeX</code>)，因此可以直接進到下一步。</p>
<div class="note warning flat"><p>若你是剛安裝完就馬上進行設定，需要先將 VScode <strong>完全關閉再重啟</strong>以重新獲取環境變數，否則會因找不到路徑而在編譯時產生 <code>Recipe terminated with fatal error: spawn xelatex ENOENT</code> 錯誤。</p>
</div>
<h3 id="設定-latex-recipes-and-tools">設定 LaTeX recipes and tools</h3>
<p>首先打開設定，在右上角的按鈕點擊<strong>開啟設定 (JSON)</strong>，開啟的 <code>settings.json</code> 是 VScode 延伸模組的設定。</p>
<p><img src="../../img/2023/LaTeX-with-vscode/vscode-settings-json.webp" alt="Latex-workshop recipes"></p>
<p>將下方的 code 加到 <code>settings.json</code> 的最後面（刪節號代表其他設置，不用複製），若想使用自己的配置可以自行修改：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">&quot;latex-workshop.latex.recipes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;XeLaTeX&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;tools&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;xelatex&quot;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;PDFLaTeX&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;tools&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;pdflatex&quot;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;BibTeX&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;tools&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;bibtex&quot;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xelatex -&gt; bibtex -&gt; xelatex*2&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;tools&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;xelatex&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;bibtex&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;xelatex&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;xelatex&quot;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pdflatex -&gt; bibtex -&gt; pdflatex*2&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;tools&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;pdflatex&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;bibtex&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;pdflatex&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;pdflatex&quot;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;latex-workshop.latex.tools&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xelatex&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xelatex&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;-synctex=1&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;-interaction=nonstopmode&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;-file-line-error&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;-outdir=%OUTDIR%&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;%DOC%&quot;</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;env&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pdflatex&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pdflatex&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;-synctex=1&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;-interaction=nonstopmode&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;-file-line-error&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;%DOC%&quot;</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;env&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bibtex&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bibtex&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;%DOCFILE%&quot;</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;env&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    </span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">    ...</span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>上面的設定是 LaTeX 的編譯方式，由於我有撰寫中文內容的需求，因此選擇對<strong>支援 Unicode</strong> 的 XeLaTeX。BibTeX 則是用於<strong>管理、產生參考文獻目錄</strong>的格式，當使用到 <code>.bib</code> 的檔案時需要。</p>
<div class="note info flat"><p>若文章主要以中文撰寫，建議使用 <code>ctex</code> 這個 package，功能較完整且方便使用，也會呼叫較底層的 <code>xeCJK</code>。</p>
</div>
<h3 id="其他設定">其他設定</h3>
<p>以下設定為個人設定，僅供參考。可以直接加到 <code>settings.json</code>，或者在有 UI 的設定頁面進行設置。</p>
<ul>
<li><code>&quot;latex-workshop.latex.autoBuild.run&quot;: &quot;never&quot;</code>: 在何時進行自動編譯。
<ul>
<li><code>never</code>: 需手動編譯。</li>
<li><code>onSave</code>: 存檔時自動編譯。</li>
<li><code>onFileChange</code>: 檔案在任何情況下更動內容時編譯。</li>
</ul>
</li>
<li><code>&quot;latex-workshop.latex.autoClean.run&quot;: &quot;never&quot;</code>: 在何時清除輔助檔案。
<ul>
<li><code>never</code>: 永不清理。</li>
<li><code>onFailed</code>: 在編譯失敗時清理。</li>
<li><code>onSucceeded</code>: 在編譯成功時清理。</li>
<li><code>onBuilt</code>: 編譯後一律清理。</li>
</ul>
</li>
</ul>
<h2 id="latex-設定">LaTeX 設定</h2>
<h3 id="嘗試編譯檔案">嘗試編譯檔案</h3>
<p>大致設置好後，可以先編譯一個檔案試試，首先隨意建立一個副檔名為 <code>.tex</code> 的檔案（為了避免錯誤，檔名建議使用英文），內容可以使用以下範例：</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">\PassOptionsToPackage</span>&#123;quiet&#125;&#123;fontspec&#125;  <span class="comment">% 忽略字型警告</span></span><br><span class="line"><span class="keyword">\documentclass</span>[12pt]&#123;ctexrep&#125;</span><br><span class="line"><span class="keyword">\usepackage</span>[margin=1in]&#123;geometry&#125;</span><br><span class="line"><span class="keyword">\usepackage</span>&#123;ctex&#125;</span><br><span class="line"><span class="keyword">\title</span>&#123;<span class="keyword">\hei</span><span class="keyword">\zihao</span>&#123;4&#125; This is a test for VScode&#125;</span><br><span class="line"><span class="keyword">\author</span>&#123;<span class="keyword">\kai</span> 作者&#125;</span><br><span class="line"><span class="keyword">\date</span>&#123;2023.04.04&#125;</span><br><span class="line"><span class="keyword">\begin</span>&#123;document&#125;</span><br><span class="line">    <span class="keyword">\maketitle</span></span><br><span class="line"><span class="keyword">\begin</span>&#123;abstract&#125;</span><br><span class="line">    Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#x27;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</span><br><span class="line"><span class="keyword">\end</span>&#123;abstract&#125;</span><br><span class="line"><span class="keyword">\tableofcontents</span></span><br><span class="line"><span class="keyword">\section</span>&#123;This is a section&#125;</span><br><span class="line">Hello world! <span class="keyword">\textbf</span>&#123;繁體&#125;<span class="keyword">\emph</span>&#123;中文&#125;測試。</span><br><span class="line"><span class="keyword">\end</span>&#123;document&#125;</span><br></pre></td></tr></table></figure>
<p>存檔後若沒有自動編譯，可以按 <code>Ctrl + Alt + B</code> 來手動編譯。此時會發現編譯失敗，並產生了一個 <code>&lt;檔名&gt;.log</code>，在裡面可以找到一個錯誤訊息 <code>! LaTeX Error: File `ctex.sty' not found.</code>。</p>
<h3 id="安裝缺少的-package">安裝缺少的 package</h3>
<p>這是因為 TinyTeX 一開始只包含了少量的 package，根據 TinyTeX 官方網站的說明，可以使用以下指令來搜尋是缺少的檔案是屬於哪個 package：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ tlmgr search --global --file <span class="string">&quot;/ctex.sty&quot;</span></span><br><span class="line">tlmgr.pl: package repository https://mirror-hk.koddos.net/CTAN/systems/texlive/tlnet (not verified: gpg unavailable)</span><br><span class="line">ctex:</span><br><span class="line">        texmf-dist/tex/latex/ctex/ctex.sty</span><br></pre></td></tr></table></figure>
<p>可以發現是缺了 <code>ctex</code> 這個 package，接著執行以下指令來安裝：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tlmgr install ctex</span><br></pre></td></tr></table></figure>
<div class="note info flat"><p>若出現版本太低的提示，可以照<a href="#%E5%AE%89%E8%A3%9D-latex">安裝 LaTeX</a> 裡的檔案重新安裝到最新版。</p>
</div>
<p>接著再編譯一次，還是編譯失敗，而且錯誤訊息更多了，其中的關鍵訊息如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Package fontspec Info: Could not resolve font &quot;KaiTi/B&quot; (it probably doesn&#x27;t</span><br><span class="line">(fontspec)             exist).</span><br><span class="line"></span><br><span class="line">Package fontspec Info: Could not resolve font &quot;SimHei/I&quot; (it probably doesn&#x27;t</span><br><span class="line">(fontspec)             exist).</span><br><span class="line"></span><br><span class="line">Package fontspec Info: Could not resolve font &quot;SimSun/BI&quot; (it probably doesn&#x27;t</span><br><span class="line">(fontspec)             exist).</span><br></pre></td></tr></table></figure>
<p>因為 <code>ctex</code> 預設使用的字型是簡體中文，而我們的電腦裡沒有這些字型，因此我們需要自己手動建立一個字型設定檔。</p>
<h3 id="建立字型設定檔">建立字型設定檔</h3>
<p>Windows 預設的字型設定檔路徑是 <code>C:/Users/&lt;使用者名稱&gt;/AppData/Roaming/TinyTeX/texmf-dist/tex/latex/ctex/fontset/</code>，在此目錄下新增一個叫做 <code>ctex-fontset-&lt;name&gt;.def</code> 的檔案，<code>name</code> 是等等要使用的名稱。</p>
<p>在剛剛新增的檔案輸入以下內容，注意第一行要替換檔名：</p>
<figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">\ProvidesExplFile</span>&#123;ctex-fontset-windows-&lt;name&gt;.def&#125;&#123;<span class="keyword">\ExplFileDate</span>&#125;&#123;0.0.1&#125;&#123;<span class="keyword">\ExplFileDescription</span>&#125;</span><br><span class="line"><span class="keyword">\PassOptionsToPackage</span>&#123;silent&#125;&#123;fontspec&#125;</span><br><span class="line"><span class="keyword">\ctex_fontset_case:nnn</span></span><br><span class="line">  &#123;&#125;</span><br><span class="line">  &#123;&#125;</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">\setCJKmainfont</span>&#123;MingLiU&#125;[ BoldFont = Microsoft~JhengHei , ItalicFont = DFKai-SB ]</span><br><span class="line">    <span class="keyword">\setCJKsansfont</span>&#123;Microsoft~JhengHei&#125;[BoldFont = *~Bold]</span><br><span class="line">    <span class="keyword">\setCJKmonofont</span>&#123;MingLiU~Regular &#125;</span><br><span class="line">    <span class="keyword">\setCJKfamilyfont</span>&#123;ming&#125; &#123;MingLiU~Regular&#125;</span><br><span class="line">    <span class="keyword">\setCJKfamilyfont</span>&#123;zhhei&#125; &#123;Microsoft~JhengHei &#125;</span><br><span class="line">    <span class="keyword">\setCJKfamilyfont</span>&#123;zhkai&#125; &#123;DFKai-SB&#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">\NewDocumentCommand</span> <span class="keyword">\ming</span>&#123;&#125;&#123;<span class="keyword">\CJKfamily</span>&#123;ming&#125;&#125;</span><br><span class="line"><span class="keyword">\NewDocumentCommand</span> <span class="keyword">\hei</span>&#123;&#125;&#123;<span class="keyword">\CJKfamily</span>&#123;zhhei&#125;&#125;</span><br><span class="line"><span class="keyword">\NewDocumentCommand</span> <span class="keyword">\kai</span>&#123;&#125;&#123;<span class="keyword">\CJKfamily</span>&#123;zhkai&#125;&#125;</span><br></pre></td></tr></table></figure>
<p><code>MingLiU</code> 是新細明體、<code>Microsoft~JhengHei</code> 是微軟正黑體，<code>DFKai-SB</code> 是標楷體。可依需求改為其他字體。</p>
<p>接著要關閉 ctex 套用預設字型設定檔的功能，並使用我們剛剛弄好的設定檔。先在 LaTeX 檔案開頭的 <code>\documentclass</code> 的選項加入 <code>fontset = none</code>，再使用 <code>\ctexset&#123;fontset = &lt;name&gt;&#125;</code> 指定設定檔（自行替換 <code>name</code>）。</p>
<figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">\documentclass</span>[fontset = none, 12pt]&#123;ctexrep&#125;</span><br><span class="line">...</span><br><span class="line"><span class="keyword">\ctexset</span>&#123;fontset = &lt;name&gt;&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>最後存檔再次編譯就能順利產生 pdf 檔了。</p>
<div class="note info flat"><p>若仍然會讀取到預設的字型檔案，可以嘗試將 VScode 完全關閉再開。<br>
如果想針對某個檔案製作特殊的設定檔，可以將 <code>ctex-fontset-&lt;name&gt;.def</code> 放在與 LaTeX 檔案相同的目錄下。</p>
</div>
<h2 id="reference">Reference</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/James-Yu/LaTeX-Workshop/wiki">Home · James-Yu/LaTeX-Workshop Wiki</a></li>
<li><a target="_blank" rel="noopener" href="https://kaibaoom.tw/posts/notes/vscode-latex/">使用VSCode上撰寫中文Latex文件 | Kaibaooo’s Note</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/166523064">Visual Studio Code (vscode)配置LaTeX - 知乎</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/434142338">VScode+Latex+SumatraPDF反向搜索失败解决办法（Version 1.63） - 知乎</a></li>
<li><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/58656895">处理中文时应该用ctex宏包还是应该用xeCJK宏包？ - 知乎</a></li>
<li><a target="_blank" rel="noopener" href="https://kuaz.info/posts/2023/01/latex-tutorial-part-ctex/">在 LaTeX 建立中文文件 - 陳家瑋</a></li>
<li><a target="_blank" rel="noopener" href="https://mirror-hk.koddos.net/CTAN/language/chinese/ctex/ctex.pdf">CTeX 宏集手册</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/145429470">[LaTeX 中文使用] 抑制 xeCJK/fontspec 警告 no-script “CJK” - 知乎</a></li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="https://github.com/JHTNT">JHTNT</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章連結: </span><span class="post-copyright-info"><a href="https://jhtnt.github.io/posts/LaTeX-with-vscode/">https://jhtnt.github.io/posts/LaTeX-with-vscode/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版權聲明: </span><span class="post-copyright-info">本部落格所有文章除特別聲明外，均採用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 許可協議。轉載請註明來自 <a href="https://jhtnt.github.io" target="_blank">JHTNT Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/VScode/">VScode</a><a class="post-meta__tags" href="/tags/LaTeX/">LaTeX</a></div><div class="post_share"></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-full"><a href="/posts/use-giscus-as-comment-system/" title="如何使用 giscus 作為留言系統"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">如何使用 giscus 作為留言系統</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 評論</span></div></div><div class="comment-wrap"><div><div id="giscus-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目錄</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%9D-latex"><span class="toc-number">1.</span> <span class="toc-text">安裝 LaTeX</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A8%AD%E7%BD%AE-latex-workshop"><span class="toc-number">2.</span> <span class="toc-text">設置 LaTeX Workshop</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A8%AD%E5%AE%9A-latex-%E7%92%B0%E5%A2%83%E8%AE%8A%E6%95%B8"><span class="toc-number">2.1.</span> <span class="toc-text">設定 LaTeX 環境變數</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A8%AD%E5%AE%9A-latex-recipes-and-tools"><span class="toc-number">2.2.</span> <span class="toc-text">設定 LaTeX recipes and tools</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E8%A8%AD%E5%AE%9A"><span class="toc-number">2.3.</span> <span class="toc-text">其他設定</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#latex-%E8%A8%AD%E5%AE%9A"><span class="toc-number">3.</span> <span class="toc-text">LaTeX 設定</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%98%97%E8%A9%A6%E7%B7%A8%E8%AD%AF%E6%AA%94%E6%A1%88"><span class="toc-number">3.1.</span> <span class="toc-text">嘗試編譯檔案</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%9D%E7%BC%BA%E5%B0%91%E7%9A%84-package"><span class="toc-number">3.2.</span> <span class="toc-text">安裝缺少的 package</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BB%BA%E7%AB%8B%E5%AD%97%E5%9E%8B%E8%A8%AD%E5%AE%9A%E6%AA%94"><span class="toc-number">3.3.</span> <span class="toc-text">建立字型設定檔</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#reference"><span class="toc-number">4.</span> <span class="toc-text">Reference</span></a></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2023 - 2024 By JHTNT</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主題 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="hide-aside-btn" type="button" title="單欄和雙欄切換"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button class="close" id="mobile-toc-button" type="button" title="目錄"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直達評論"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到頂部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜尋</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  資料庫載入中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜尋文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex/dist/contrib/copy-tex.min.js"></script><script>(() => {
  document.querySelectorAll('#article-container span.katex-display').forEach(item => {
    btf.wrap(item, 'div', { class: 'katex-wrap'})
  })
})()</script><script>function loadGiscus () {
  let nowTheme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'light'

  const config = Object.assign({
    src: 'https://giscus.app/client.js',
    'data-repo': 'JHTNT/jhtnt.github.io',
    'data-repo-id': 'R_kgDOIyZFBQ',
    'data-category-id': 'DIC_kwDOIyZFBc4CYGP7',
    'data-mapping': 'pathname',
    'data-theme': nowTheme,
    'data-reactions-enabled': '1',
    crossorigin: 'anonymous',
    async: true
  },{"data-mapping":"pathname","data-strict":"1","data-emit-metadata":"0","data-input-position":"top","data-lang":"zh-TW"})

  let ele = document.createElement('script')
  for (let key in config) {
    ele.setAttribute(key, config[key])
  }
  document.getElementById('giscus-wrap').insertAdjacentElement('afterbegin',ele)
}

function changeGiscusTheme () {
  const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'light'

  function sendMessage(message) {
    const iframe = document.querySelector('iframe.giscus-frame');
    if (!iframe) return;
    iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
  }

  sendMessage({
    setConfig: {
      theme: theme
    }
  });
}

if ('Giscus' === 'Giscus' || !true) {
  if (true) btf.loadComment(document.getElementById('giscus-wrap'), loadGiscus)
  else loadGiscus()
} else {
  function loadOtherComment () {
    loadGiscus()
  }
}</script></div></div></body></html>